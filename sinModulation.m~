function x = sinModulation( y, fs, fo, t )

y = downSamplingAndFiltration(y,fs,8000);
fs=8000;

N=length(y);


% [ Yabs, Yang ] = orgFFT( y, N, fs );
[ Yabs, Yang ] = roundFFT(  y, N, fs );


%%

[amplitude,phase] = retriveAmp_Phase(fo, fs, Yabs, Yang);


% figure;
% plot(amplitude);
% grid on;
% xlabel('probki');
% title('Odtworzone FFT');

t = t*fs;
n=(1:t)/fs;
% n=(1:N)/fs;   %sygnal dlugosci wycietego

x = recreateSignal(amplitude, phase, fo, n, N);


figure;
subplot(2,2,1)
plot(y);
xlabel('probki');
title('wyciety sygnal');

subplot(2,2,2)
ty=[1:1:N]/fs;
plot(ty,y);
xlabel('Czas');
title('wyciety sygnal');

subplot(2,2,3)
plot(n,x);
title('Odtworzony sygnal');
xlabel('Czas');

subplot(2,2,2)
plot(x);
title('Odtworzony sygnal');
xlabel('Czas');

end

